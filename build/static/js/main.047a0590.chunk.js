(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),r=n(21),i=n.n(r),o=n(2),s=(n(27),n(6)),h=n(7),u=n(9),l=n(8),j=(n(28),"ce2eb9dc8a268657dca33c0f3f4f0ac2"),m="https://api.themoviedb.org/3",d=function(t){return fetch("".concat(m,"/search/movie?api_key=").concat(j,"&query=").concat(t)).then((function(t){return t.json()})).then((function(t){return t.results}))},b=n(11),v="/",p="/movies",f="/movies/:movieId",O="/movies/:movieId/cast",x="/movies/:movieId/reviews",y=n(0),g=Object(o.f)((function(t){var e=t.movies;t.match;return Object(y.jsx)("ul",{children:e.map((function(t){return Object(y.jsx)("li",{children:Object(y.jsx)(b.b,{to:"".concat(p,"/").concat(t.id),children:t.title})},t.id)}))})})),k=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={movies:[]},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("".concat(m,"/trending/movie/day?api_key=").concat(j)).then((function(t){return t.json()})).then((function(t){return t.results})).then((function(e){t.setState({movies:e})})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){var t=this.state.movies;return Object(y.jsx)("div",{className:"HomePage",children:t&&Object(y.jsx)(g,{movies:t})})}}]),n}(c.Component),w=n(19),S=(n(35),n(36),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={keyword:""},t.handleKeywordChange=function(e){t.setState({keyword:e.target.value.toLowerCase()})},t.handleSubmit=function(e){if(e.preventDefault(),""===t.state.keyword.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430");t.props.formSubmit(t.state.keyword),t.setState({keyword:""})},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(y.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search movies",value:this.state.keyword,name:"search",onChange:this.handleKeywordChange}),Object(y.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(y.jsx)("span",{children:"Search"})})]})}}]),n}(c.Component)),N=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={movies:[]},t.handleFormSubmission=function(e){t.props.history.push(Object(w.a)(Object(w.a)({},t.props.location),{},{search:"query=".concat(e)}))},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=new URLSearchParams(this.props.location.search).get("query");e&&d(e).then((function(e){t.setState({movies:e})})).catch((function(e){t.setState({error:e})}))}},{key:"componentDidUpdate",value:function(t,e){var n=this,c=new URLSearchParams(t.location.search).get("query"),a=new URLSearchParams(this.props.location.search).get("query");c!==a&&d(a).then((function(t){n.setState({movies:t})})).catch((function(t){n.setState({error:t})}))}},{key:"render",value:function(){var t=this.state.movies;return Object(y.jsxs)("div",{className:"HomePage",children:[Object(y.jsx)(S,{formSubmit:this.handleFormSubmission}),t&&Object(y.jsx)(g,{movies:t})]})}}]),n}(c.Component),C=n(14),I=(n(37),n(38),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={cast:[]},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;(function(t){return fetch("".concat(m,"/movie/").concat(t,"/credits?api_key=").concat(j)).then((function(t){return t.json()})).then((function(t){return t.cast}))})(this.props.match.params.movieId).then((function(e){t.setState({cast:e})})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){var t=this.state.cast;return t.length>0?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("ul",{children:t.map((function(t){return Object(y.jsxs)("li",{className:"CastPageItem",children:[Object(y.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w185").concat(t.profile_path),alt:""}),Object(y.jsx)("h4",{children:t.original_name}),Object(y.jsxs)("p",{children:["Character: ",t.character," "]})]},t.id)}))})}):0===t.length?Object(y.jsx)("h2",{children:"No data found"}):void 0}}]),n}(c.Component)),L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={reviews:[]},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;(function(t){return fetch("".concat(m,"/movie/").concat(t,"/reviews?api_key=").concat(j)).then((function(t){return t.json()})).then((function(t){return t.results}))})(this.props.match.params.movieId).then((function(e){t.setState({reviews:e})})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){var t=this.state.reviews;return t.length>0?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("ul",{children:t.map((function(t){return Object(y.jsxs)("li",{className:"",children:[Object(y.jsx)("h1",{children:t.author}),Object(y.jsx)("p",{children:t.content})]},t.id)}))})}):0===t.length?Object(y.jsx)("h2",{children:"No data found"}):void 0}}]),n}(c.Component),A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var c;return Object(s.a)(this,n),(c=e.call(this,t)).state={movie:{genres:[]}},c.goBack=c.goBack.bind(Object(C.a)(c)),c}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;(function(t){return fetch("".concat(m,"/movie/").concat(t,"?api_key=").concat(j)).then((function(t){return t.json()}))})(this.props.match.params.movieId).then((function(e){t.setState({movie:e})}))}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var t=this.state.movie,e=t.title,n=t.poster_path,c=t.vote_average,a=t.overview,r=t.release_date,i=t.genres;return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{type:"button",onClick:this.goBack,children:"go back"}),Object(y.jsxs)("div",{className:"DetailsPage",children:[Object(y.jsx)("img",{alt:e,src:"".concat("https://image.tmdb.org/t/p/w342/").concat(n)}),Object(y.jsxs)("div",{className:"DetailsPageAbout",children:[Object(y.jsxs)("h2",{children:[e," (",r,")"]}),Object(y.jsxs)("p",{children:["User score: ",c," "]}),Object(y.jsx)("h3",{children:"Overview"}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("h3",{children:"Genres"}),Object(y.jsx)("ul",{children:i.map((function(t){return Object(y.jsx)("li",{children:t.name},t.id)}))})]})]}),Object(y.jsxs)("div",{className:"AdditionalInformation",children:[Object(y.jsx)("p",{children:"Additional information"}),Object(y.jsxs)("ul",{className:"AdditionalInformationList",children:[Object(y.jsx)("li",{className:"AdditionalInformationItem",children:Object(y.jsx)(b.b,{className:"NavLink",to:"".concat(this.props.match.url,"/cast"),children:"Cast"})}),Object(y.jsx)("li",{className:"AdditionalInformationItem",children:Object(y.jsx)(b.b,{className:"NavLink",to:"".concat(this.props.match.url,"/reviews"),children:"Reviews"})})]})]}),Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:O,component:I}),Object(y.jsx)(o.a,{exact:!0,path:x,component:L})]})]})}}]),n}(c.Component),_=(n(39),function(){return Object(y.jsxs)("header",{className:"NavLinkBar",children:[Object(y.jsx)(b.c,{exact:!0,className:"NavLink",activeClassName:"NavLink--active",to:v,children:"Home"}),Object(y.jsx)(b.c,{className:"NavLink",activeClassName:"NavLink--active",to:p,children:"Movies"})]})}),D=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_,{}),Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:v,component:k}),Object(y.jsx)(o.a,{exact:!0,path:p,component:N}),Object(y.jsx)(o.a,{path:f,component:A})]})]})};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(b.a,{children:Object(y.jsx)(D,{})})}),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.047a0590.chunk.js.map